<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>ç”Ÿæ´»åƒåœ¾åˆ†ç±»åŠ©æ‰‹</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    *{box-sizing:border-box;}
    body{
      margin:0;
      background:#f5f7fc;
      font-family:"Segoe UI","PingFang SC","Microsoft YaHei",sans-serif;
      color:#333;
    }
    .hidden{display:none!important;}

    /* é¡¶éƒ¨ header */
    .top-header{
      display:flex;justify-content:space-between;align-items:center;
      padding:18px 28px;background:#fff;
      box-shadow:0 2px 20px rgba(0,0,0,0.05);
      position:sticky;top:0;z-index:100;
    }
    .logo-wrap{display:flex;align-items:center;gap:10px;}
    .logo-icon{font-size:30px;}
    .logo-title{font-size:20px;font-weight:700;}
    .logo-subtitle{font-size:13px;opacity:.75;}

    .lang-toggle{display:flex;align-items:center;gap:6px;font-size:14px;}
    .lang-btn{
      border:none;background:transparent;padding:5px 10px;
      border-radius:999px;cursor:pointer;transition:.18s;
    }
    .lang-btn.active{background:#e3efff;color:#2b5dba;}
    .lang-btn:hover{background:#edf3ff;}

    /* é¡µé¢å¸ƒå±€ */
    .page-wrap{
      max-width:960px;margin:24px auto 32px;padding:0 16px;
    }

    /* tab å¯¼èˆª */
    .tab-nav{
      display:flex;background:#fff;border-radius:999px;
      box-shadow:0 4px 18px rgba(0,0,0,0.05);
      padding:4px;margin-bottom:20px;
    }
    .tab-btn{
      flex:1;border:none;background:transparent;
      border-radius:999px;padding:10px 12px;
      font-size:14px;cursor:pointer;color:#627196;
      transition:.2s;
    }
    .tab-btn.active{
      background:#e3efff;color:#1f4c9a;font-weight:600;
    }

    /* å¡ç‰‡ */
    .card{
      background:#fff;border-radius:18px;
      box-shadow:0 10px 30px rgba(15,23,42,0.06);
      padding:22px 24px;margin-bottom:22px;
    }
    .card-title{
      font-size:18px;display:flex;align-items:center;
      gap:8px;font-weight:700;
    }
    .card-subtitle{font-size:14px;opacity:.75;}

    /* æœç´¢åŒº */
    .search-row{
      display:flex;gap:14px;margin-top:16px;flex-wrap:wrap;
    }
    .search-input-box{position:relative;flex:1;max-width:540px;}
    .search-input{
      width:100%;padding:14px 18px 14px 46px;
      border-radius:999px;border:none;background:#fff;
      box-shadow:0 6px 20px rgba(15,23,42,0.08);
      font-size:15px;transition:.2s;
    }
    .search-input:focus{
      outline:none;
      box-shadow:0 10px 28px rgba(15,23,42,0.12);
      transform:translateY(-1px);
    }
    .search-input-icon{
      position:absolute;left:16px;top:11px;font-size:18px;opacity:.6;
    }
    .search-btn{
      border:none;border-radius:999px;padding:12px 24px;
      font-size:14px;
      background:linear-gradient(135deg,#9ec9ff,#6fa8ff);
      color:#fff;cursor:pointer;white-space:nowrap;
      box-shadow:0 8px 20px rgba(111,168,255,0.35);
      transition:.18s;
    }
    .search-btn:hover{
      transform:translateY(-2px);
      box-shadow:0 10px 26px rgba(111,168,255,0.45);
    }

    .suggestion-list{
      position:absolute;top:54px;width:100%;
      background:#fff;border-radius:14px;
      box-shadow:0 12px 30px rgba(15,23,42,0.14);
      border:1px solid #e5edff;list-style:none;
      padding:8px 0;margin:0;z-index:20;
    }
    .suggestion-list li{
      padding:8px 14px;font-size:14px;cursor:pointer;
    }
    .suggestion-list li:hover{background:#f1f5ff;}

    .result-area{
      margin-top:20px;padding:14px 16px;border-radius:16px;
      background:#f7f9ff;border:1px solid #e2e9ff;min-height:40px;
    }
    .result-title{font-size:16px;font-weight:600;margin-bottom:4px;}
    .result-meta{font-size:14px;opacity:.85;}
    .stat-pill{
      display:inline-block;padding:6px 12px;border-radius:999px;
      background:#eaf2ff;color:#2b4f9b;font-size:13px;margin-top:10px;
    }

    /* æ¸¸æˆå¸ƒå±€ */
    .game-layout{display:flex;flex-wrap:wrap;gap:18px;}
    .game-status-card{
      width:250px;border-radius:16px;background:#f3f6ff;
      padding:14px;box-shadow:0 8px 24px rgba(15,23,42,0.06);
    }
    .game-intro-list{margin:8px 0 10px 18px;font-size:14px;}
    .game-status-row{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:10px;}
    .status-tag{
      font-size:13px;border-radius:999px;padding:5px 10px;
      background:#e2ebff;color:#27488f;
    }
    .badge-pulse{animation:badgePulse .3s ease-out;}
    @keyframes badgePulse{
      0%{transform:scale(1);}
      30%{transform:scale(1.06);}
      100%{transform:scale(1);}
    }
    .game-btn-row{display:flex;flex-direction:column;gap:6px;margin-top:8px;}
    .btn-outline{
      border-radius:10px;border:1px solid #9ec1ff;background:#fff;
      padding:7px 8px;font-size:14px;cursor:pointer;
    }
    .btn-outline-danger{border-color:#ff8b8b;}

    .game-area{flex:1;min-width:260px;}
    .game-trash-item{
      margin-top:10px;display:inline-block;padding:12px 16px;
      border-radius:999px;background:#eef3ff;font-size:16px;
      box-shadow:0 6px 14px rgba(15,23,42,0.08);
    }
    .bins-grid{
      margin-top:14px;
      display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
      gap:10px;
    }
    .bin{
      border-radius:14px;padding:10px 12px;
      border:1px solid #dde5ff;background:#fff;
      font-size:14px;cursor:pointer;text-align:left;
      transition:.18s;
    }
    .bin:hover{background:#edf3ff;border-color:#c0d2ff;}
    .game-feedback{margin-top:16px;min-height:22px;font-size:14px;}
    .feedback-correct{color:#1f8a4d;animation:feedbackPop .35s ease-out;}
    .feedback-wrong{color:#d04545;animation:feedbackShake .3s ease-out;}
    .game-end{animation:endPop .5s ease-out;}
    @keyframes feedbackPop{
      0%{transform:scale(.95);opacity:0;}
      100%{transform:scale(1);opacity:1;}
    }
    @keyframes feedbackShake{
      0%{transform:translateX(0);}
      25%{transform:translateX(-3px);}
      50%{transform:translateX(3px);}
      75%{transform:translateX(-2px);}
      100%{transform:translateX(0);}
    }
    @keyframes endPop{
      0%{transform:scale(.92);opacity:0;}
      100%{transform:scale(1);opacity:1;}
    }

    /* å…³äº */
    .guide-list{padding-left:18px;margin-top:6px;}

    /* å“åº”å¼ */
    @media(max-width:800px){
      .search-row{flex-direction:column;align-items:stretch;}
      .search-btn{align-self:flex-start;}
      .game-layout{flex-direction:column;}
      .game-status-card{width:100%;}
      .tab-nav{flex-direction:column;border-radius:16px;}
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨ header -->
  <header class="top-header">
    <div class="logo-wrap">
      <div class="logo-icon">ğŸ“</div>
      <div>
        <div class="logo-title">ç”Ÿæ´»åƒåœ¾åˆ†ç±»åŠ©æ‰‹</div>
        <div class="logo-subtitle">å¿«é€ŸæŸ¥è¯¢åƒåœ¾ç±»åˆ«ï¼Œæé«˜åˆ†ç±»å‡†ç¡®æ€§</div>
      </div>
    </div>
    <div class="lang-toggle">
      <button class="lang-btn active" id="langZhBtn">ä¸­æ–‡</button>
      <span>/</span>
      <button class="lang-btn" id="langKoBtn">í•œêµ­ì–´</button>
    </div>
  </header>

  <main class="page-wrap">
    <!-- é¡¶éƒ¨ tab -->
    <nav class="tab-nav">
      <button class="tab-btn active" data-target="search-section" id="navSearchBtn">æŸ¥è¯¢åˆ†ç±»</button>
      <button class="tab-btn" data-target="game-section" id="navGameBtn">åˆ†ç±»ç»ƒä¹ </button>
      <button class="tab-btn" data-target="about-section" id="navAboutBtn">å…³äºç½‘é¡µ</button>
    </nav>

    <!-- æŸ¥è¯¢æ¨¡å— -->
    <section id="search-section" class="card">
      <header class="card-header">
        <h2 class="card-title">ğŸ” <span id="searchTitleText">åƒåœ¾åˆ†ç±»æŸ¥è¯¢</span></h2>
        <p class="card-subtitle" id="searchSubtitleText">
          è¾“å…¥åƒåœ¾åç§°ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨åŒ¹é…å¯¹åº”åˆ†ç±»ã€‚
        </p>
      </header>

      <div class="search-row">
        <div class="search-input-box">
          <span class="search-input-icon">ğŸ”</span>
          <input id="searchInput" class="search-input" autocomplete="off"
                 placeholder="è¯·è¾“å…¥åƒåœ¾åç§°ï¼Œä¾‹å¦‚ï¼šé¦™è•‰çš®ã€çº¸ç›’ã€ç”µæ± ..." />
          <ul id="suggestionList" class="suggestion-list hidden"></ul>
        </div>
        <button id="searchBtn" class="search-btn">æœç´¢</button>
      </div>

      <section id="resultArea" class="result-area">
        <p id="resultEmptyText">è¯·åœ¨ä¸Šæ–¹è¾“å…¥åƒåœ¾åç§°ä»¥æŸ¥çœ‹åˆ†ç±»ç»“æœã€‚</p>
        <div id="resultContent"></div>
      </section>

      <span id="statSearchCount" class="stat-pill">ä»Šæ—¥æŸ¥è¯¢ï¼š0 æ¬¡</span>
    </section>

    <!-- åˆ†ç±»ç»ƒä¹  -->
    <section id="game-section" class="card hidden">
      <header class="card-header">
        <h2 class="card-title">ğŸ® <span id="gameTitleText">åˆ†ç±»ç»ƒä¹ </span></h2>
        <p class="card-subtitle" id="gameSubtitleText">
          é€šè¿‡ç»ƒä¹ æå‡å¯¹åƒåœ¾åˆ†ç±»è§„åˆ™çš„ç†è§£ã€‚
        </p>
      </header>

      <div class="game-layout">
        <!-- å·¦ä¾§è¯´æ˜ -->
        <aside class="game-status-card">
          <strong id="gameRulesTitle">æ“ä½œè¯´æ˜</strong>
          <ul class="game-intro-list">
            <li id="rule1">ç³»ç»Ÿéšæœºå‡ºç°ä¸€ä¸ªåƒåœ¾åç§°</li>
            <li id="rule2">é€‰æ‹©ä½ è®¤ä¸ºæ­£ç¡®çš„åˆ†ç±»</li>
            <li id="rule3">ç­”å¯¹åŠ åˆ†ï¼Œç­”é”™æ‰£åˆ†</li>
          </ul>

          <div class="game-status-row">
            <div class="status-tag" id="badgeScore">
              <span id="labelScore">åˆ†æ•°ï¼š</span><strong id="gameScoreValue">0</strong>
            </div>
            <div class="status-tag" id="badgeRound">
              <span id="labelRound">é¢˜ç›®ï¼š</span><strong id="gameRoundValue">0</strong> / <span id="gameMaxRound">20</span>
            </div>
            <div class="status-tag" id="badgeLives">
              <span id="labelLives">å‰©ä½™ï¼š</span><strong id="gameLivesValue">5</strong>
            </div>
          </div>

          <div class="game-btn-row">
            <button class="btn-outline" id="btnStartGame">å¼€å§‹ç»ƒä¹ </button>
            <button class="btn-outline" id="btnSkip">è·³è¿‡</button>
            <button class="btn-outline btn-outline-danger" id="btnReveal">æ˜¾ç¤ºç­”æ¡ˆ</button>
          </div>
        </aside>

        <!-- å³ä¾§æ¸¸æˆ -->
        <section class="game-area">
          <p class="game-subtitle" id="currentTrashLabel">å½“å‰åƒåœ¾ï¼š</p>
          <div id="gameTrashItem" class="game-trash-item">ç‚¹å‡»â€œå¼€å§‹ç»ƒä¹ â€ä»¥å¼€å§‹</div>

          <div class="bins-grid">
            <button class="bin" data-category="recycle" id="binRecycle">â™»ï¸ å¯å›æ”¶ç‰©</button>
            <button class="bin" data-category="kitchen" id="binKitchen">ğŸ¥• å¨ä½™åƒåœ¾</button>
            <button class="bin" data-category="hazard" id="binHazard">â˜ ï¸ æœ‰å®³åƒåœ¾</button>
            <button class="bin" data-category="other" id="binOther">ğŸ—‘ï¸ å…¶ä»–åƒåœ¾</button>
          </div>

          <div id="gameFeedback" class="game-feedback">å‡†å¤‡å°±ç»ª</div>
        </section>
      </div>
    </section>

    <!-- å…³äºç½‘é¡µ -->
    <section id="about-section" class="card hidden">
      <header class="card-header">
        <h2 class="card-title">â„¹ï¸ <span id="aboutTitleText">å…³äºç½‘é¡µ</span></h2>
        <p class="card-subtitle" id="aboutSubtitleText">ç®€è¦è¯´æ˜æœ¬ç½‘é¡µçš„åŠŸèƒ½ä¸ä½¿ç”¨æ–¹å¼ã€‚</p>
      </header>
      <div class="about-text">
        <p id="aboutP1">æœ¬ç½‘é¡µç”¨äºå¸®åŠ©ç”¨æˆ·å¿«é€ŸæŸ¥è¯¢ç”Ÿæ´»åƒåœ¾çš„åˆ†ç±»ç»“æœï¼Œå¹¶é€šè¿‡ç»ƒä¹ æ¨¡å—åŠ æ·±å¯¹åˆ†ç±»è§„åˆ™çš„ç†è§£ã€‚</p>
        <p id="aboutP2">é¡µé¢æä¾›ä¸­ / éŸ©åŒè¯­ç•Œé¢ï¼Œé€‚ç”¨äºå­¦ä¹ ã€è¯¾å ‚æ¼”ç¤ºæˆ–åŸºç¡€å®£ä¼ ä½¿ç”¨ã€‚</p>
        <h3 id="guideTitle">ä½¿ç”¨æŒ‡å—</h3>
        <ul class="guide-list">
          <li id="guide1">é€šè¿‡é¡¶éƒ¨æ ‡ç­¾åˆ‡æ¢â€œæŸ¥è¯¢åˆ†ç±» / åˆ†ç±»ç»ƒä¹  / å…³äºç½‘é¡µâ€ã€‚</li>
          <li id="guide2">åœ¨æŸ¥è¯¢é¡µé¢è¾“å…¥åƒåœ¾åç§°å³å¯æŸ¥çœ‹å¯¹åº”åˆ†ç±»ã€‚</li>
          <li id="guide3">åœ¨ç»ƒä¹ é¡µé¢è¿›è¡Œ 20 é“åˆ†ç±»ç»ƒä¹ ï¼Œç³»ç»Ÿä¼šç»™å‡ºç®€å•åé¦ˆã€‚</li>
          <li id="guide4">å³ä¸Šè§’å¯åœ¨ä¸­æ–‡å’ŒéŸ©è¯­ç•Œé¢ä¹‹é—´åˆ‡æ¢ã€‚</li>
        </ul>
      </div>
    </section>
  </main>

  <script>
    // ---- æ•°æ® ----
    const trashDB = {
      "é¦™è•‰çš®":"kitchen","å‰©é¥­":"kitchen","èœå¶":"kitchen","é¸¡éª¨å¤´":"kitchen","è‹¹æœæ ¸":"kitchen",
      "å¡‘æ–™ç“¶":"recycle","çº¸ç›’":"recycle","çº¸ç®±":"recycle","ç»ç’ƒç“¶":"recycle","æ˜“æ‹‰ç½":"recycle",
      "ç”µæ± ":"hazard","è¯ç‰‡":"hazard","ç¯æ³¡":"hazard","è§å…‰ç¯ç®¡":"hazard",
      "çº¸å·¾":"other","ç°å°˜":"other","ç ´ç“·ç‰‡":"other","ä¸€æ¬¡æ€§ç­·å­":"other"
    };
    const trashList = Object.keys(trashDB);
    const MAX_ROUNDS = 20;

    const i18n = {
      zh:{
        title:"ç”Ÿæ´»åƒåœ¾åˆ†ç±»åŠ©æ‰‹",
        subtitle:"å¿«é€ŸæŸ¥è¯¢åƒåœ¾ç±»åˆ«ï¼Œæé«˜åˆ†ç±»å‡†ç¡®æ€§",
        navSearch:"æŸ¥è¯¢åˆ†ç±»",navGame:"åˆ†ç±»ç»ƒä¹ ",navAbout:"å…³äºç½‘é¡µ",
        searchTitle:"åƒåœ¾åˆ†ç±»æŸ¥è¯¢",
        searchSubtitle:"è¾“å…¥åƒåœ¾åç§°ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨åŒ¹é…å¯¹åº”åˆ†ç±»ã€‚",
        searchPlaceholder:"è¯·è¾“å…¥åƒåœ¾åç§°ï¼Œä¾‹å¦‚ï¼šé¦™è•‰çš®ã€çº¸ç›’ã€ç”µæ± ...",
        searchBtn:"æœç´¢",
        resultEmpty:"è¯·åœ¨ä¸Šæ–¹è¾“å…¥åƒåœ¾åç§°ä»¥æŸ¥çœ‹åˆ†ç±»ç»“æœã€‚",
        todayQuery:"ä»Šæ—¥æŸ¥è¯¢ï¼š",
        gameTitle:"åˆ†ç±»ç»ƒä¹ ",
        gameSubtitle:"é€šè¿‡ç»ƒä¹ æå‡å¯¹åƒåœ¾åˆ†ç±»è§„åˆ™çš„ç†è§£ã€‚",
        rulesTitle:"æ“ä½œè¯´æ˜",
        rule1:"ç³»ç»Ÿéšæœºå‡ºç°ä¸€ä¸ªåƒåœ¾åç§°",
        rule2:"é€‰æ‹©ä½ è®¤ä¸ºæ­£ç¡®çš„åˆ†ç±»",
        rule3:"ç­”å¯¹åŠ åˆ†ï¼Œç­”é”™æ‰£åˆ†",
        labelScore:"åˆ†æ•°ï¼š",
        labelRound:"é¢˜ç›®ï¼š",
        labelLives:"å‰©ä½™ï¼š",
        currentTrash:"å½“å‰åƒåœ¾ï¼š",
        clickStart:"ç‚¹å‡»â€œå¼€å§‹ç»ƒä¹ â€ä»¥å¼€å§‹",
        gameReady:"å‡†å¤‡å°±ç»ª",
        chooseCategory:"è¯·é€‰æ‹©åˆ†ç±»",
        recycle:"å¯å›æ”¶ç‰©",
        kitchen:"å¨ä½™åƒåœ¾",
        hazard:"æœ‰å®³åƒåœ¾",
        other:"å…¶ä»–åƒåœ¾",
        btnStart:"å¼€å§‹ç»ƒä¹ ",
        btnSkip:"è·³è¿‡",
        btnReveal:"æ˜¾ç¤ºç­”æ¡ˆ",
        correct:"å›ç­”æ­£ç¡®ã€‚",
        wrong:"å›ç­”é”™è¯¯ã€‚",
        finishedTitle:"ç»ƒä¹ å®Œæˆ",
        finishedSummary:(s,m)=>`ä½ å®Œæˆäº† ${m} é“é¢˜ï¼Œå…±å¾—åˆ† ${s} åˆ†ã€‚`,
        finishedTip:"å¯ä»¥é‡æ–°å¼€å§‹ç»ƒä¹ ä»¥è¿›ä¸€æ­¥å·©å›ºå¯¹åˆ†ç±»è§„åˆ™çš„ç†è§£ã€‚",
        aboutTitle:"å…³äºç½‘é¡µ",
        aboutSubtitle:"ç®€è¦è¯´æ˜æœ¬ç½‘é¡µçš„åŠŸèƒ½ä¸ä½¿ç”¨æ–¹å¼ã€‚",
        aboutP1:"æœ¬ç½‘é¡µç”¨äºå¸®åŠ©ç”¨æˆ·å¿«é€ŸæŸ¥è¯¢ç”Ÿæ´»åƒåœ¾çš„åˆ†ç±»ç»“æœï¼Œå¹¶é€šè¿‡ç»ƒä¹ æ¨¡å—åŠ æ·±å¯¹åˆ†ç±»è§„åˆ™çš„ç†è§£ã€‚",
        aboutP2:"é¡µé¢æä¾›ä¸­ / éŸ©åŒè¯­ç•Œé¢ï¼Œé€‚ç”¨äºå­¦ä¹ ã€è¯¾å ‚æ¼”ç¤ºæˆ–åŸºç¡€å®£ä¼ ä½¿ç”¨ã€‚",
        guideTitle:"ä½¿ç”¨æŒ‡å—",
        g1:"é€šè¿‡é¡¶éƒ¨æ ‡ç­¾åˆ‡æ¢â€œæŸ¥è¯¢åˆ†ç±» / åˆ†ç±»ç»ƒä¹  / å…³äºç½‘é¡µâ€ã€‚",
        g2:"åœ¨æŸ¥è¯¢é¡µé¢è¾“å…¥åƒåœ¾åç§°å³å¯æŸ¥çœ‹å¯¹åº”åˆ†ç±»ã€‚",
        g3:"åœ¨ç»ƒä¹ é¡µé¢è¿›è¡Œ 20 é“åˆ†ç±»ç»ƒä¹ ï¼Œç³»ç»Ÿä¼šç»™å‡ºç®€å•åé¦ˆã€‚",
        g4:"å³ä¸Šè§’å¯åœ¨ä¸­æ–‡å’ŒéŸ©è¯­ç•Œé¢ä¹‹é—´åˆ‡æ¢ã€‚"
      },
      ko:{
        title:"ìƒí™œ ì“°ë ˆê¸° ë¶„ë¥˜ ë„ìš°ë¯¸",
        subtitle:"ì“°ë ˆê¸° ì¢…ë¥˜ë¥¼ ë¹ ë¥´ê²Œ ì¡°íšŒí•˜ì—¬ ì •í™•ì„±ì„ ë†’ì…ë‹ˆë‹¤",
        navSearch:"ë¶„ë¥˜ ì¡°íšŒ",navGame:"ë¶„ë¥˜ ì—°ìŠµ",navAbout:"ì›¹í˜ì´ì§€ ì†Œê°œ",
        searchTitle:"ì“°ë ˆê¸° ë¶„ë¥˜ ì¡°íšŒ",
        searchSubtitle:"ì“°ë ˆê¸° ì´ë¦„ì„ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ë¶„ë¥˜ ê²°ê³¼ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.",
        searchPlaceholder:"ì˜ˆ: ë°”ë‚˜ë‚˜ ê»ì§ˆ, ìƒì, ê±´ì „ì§€ ë“±",
        searchBtn:"ê²€ìƒ‰",
        resultEmpty:"ìœ„ì— ì“°ë ˆê¸° ì´ë¦„ì„ ì…ë ¥í•´ ë¶„ë¥˜ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.",
        todayQuery:"ì˜¤ëŠ˜ ì¡°íšŒï¼š",
        gameTitle:"ë¶„ë¥˜ ì—°ìŠµ",
        gameSubtitle:"ì—°ìŠµì„ í†µí•´ ë¶„ë¥˜ ê·œì¹™ì„ ì‰½ê²Œ ìµí ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        rulesTitle:"ì‚¬ìš© ì„¤ëª…",
        rule1:"ì‹œìŠ¤í…œì´ ë¬´ì‘ìœ„ë¡œ ì“°ë ˆê¸° ì´ë¦„ì„ ì œì‹œí•©ë‹ˆë‹¤",
        rule2:"ì˜¬ë°”ë¥¸ ë¶„ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”",
        rule3:"ì •ë‹µì´ë©´ ì ìˆ˜ ìƒìŠ¹, ì˜¤ë‹µì´ë©´ ê°ì ë©ë‹ˆë‹¤",
        labelScore:"ì ìˆ˜ï¼š",
        labelRound:"ë¬¸ì œï¼š",
        labelLives:"ë‚¨ì€ íšŸìˆ˜ï¼š",
        currentTrash:"í˜„ì¬ ì“°ë ˆê¸°ï¼š",
        clickStart:"â€˜ì—°ìŠµ ì‹œì‘â€™ì„ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”",
        gameReady:"ì¤€ë¹„ ì™„ë£Œ",
        chooseCategory:"ë¶„ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”",
        recycle:"ì¬í™œìš©",
        kitchen:"ìŒì‹ë¬¼ ì“°ë ˆê¸°",
        hazard:"ìœ í•´ ì“°ë ˆê¸°",
        other:"ê¸°íƒ€ ì“°ë ˆê¸°",
        btnStart:"ì—°ìŠµ ì‹œì‘",
        btnSkip:"ê±´ë„ˆë›°ê¸°",
        btnReveal:"ì •ë‹µ ë³´ê¸°",
        correct:"ì •ë‹µì…ë‹ˆë‹¤.",
        wrong:"ì˜¤ë‹µì…ë‹ˆë‹¤.",
        finishedTitle:"ì—°ìŠµ ì™„ë£Œ",
        finishedSummary:(s,m)=>`ì´ ${m}ë¬¸ì œ ì¤‘ ${s}ì ì„ íšë“í–ˆìŠµë‹ˆë‹¤.`,
        finishedTip:"ë‹¤ì‹œ ì—°ìŠµí•˜ì—¬ ë¶„ë¥˜ ê·œì¹™ì„ ë” ì˜ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        aboutTitle:"ì›¹í˜ì´ì§€ ì†Œê°œ",
        aboutSubtitle:"ì´ ì›¹í˜ì´ì§€ì˜ ì£¼ìš” ê¸°ëŠ¥ê³¼ ì‚¬ìš© ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.",
        aboutP1:"ì´ ì›¹í˜ì´ì§€ëŠ” ì¼ìƒ ìƒí™œì—ì„œ ìì£¼ ì ‘í•˜ëŠ” ì“°ë ˆê¸°ì˜ ë¶„ë¥˜ ê²°ê³¼ë¥¼ ë¹ ë¥´ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.",
        aboutP2:"ì¤‘êµ­ì–´ / í•œêµ­ì–´ ì´ì¤‘ ì–¸ì–´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ì—¬ í•™ìŠµê³¼ ìˆ˜ì—…ì— í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        guideTitle:"ì‚¬ìš© ì•ˆë‚´",
        g1:"ìƒë‹¨ íƒ­ì—ì„œ â€˜ë¶„ë¥˜ ì¡°íšŒ / ë¶„ë¥˜ ì—°ìŠµ / ì›¹í˜ì´ì§€ ì†Œê°œâ€™ë¥¼ ì„ íƒí•˜ì„¸ìš”.",
        g2:"ì¡°íšŒ í˜ì´ì§€ì—ì„œ ì“°ë ˆê¸° ì´ë¦„ì„ ì…ë ¥í•˜ë©´ ë¶„ë¥˜ ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        g3:"ì—°ìŠµ í˜ì´ì§€ì—ì„œ 20ë¬¸ì œë¥¼ í’€ë©° ê°„ë‹¨í•œ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        g4:"ì˜¤ë¥¸ìª½ ìƒë‹¨ ë²„íŠ¼ìœ¼ë¡œ ì–¸ì–´ë¥¼ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      }
    };

    let currentLang = "zh";
    let searchCount = 0;

    const state = {
      score:0,
      round:0,
      lives:5,
      current:null,
      started:false,
      ended:false
    };

    window.addEventListener("DOMContentLoaded", () => {
      // DOM å…ƒç´ ç¼“å­˜
      const els = {
        logoTitle:document.querySelector(".logo-title"),
        logoSubtitle:document.querySelector(".logo-subtitle"),
        langZhBtn:document.getElementById("langZhBtn"),
        langKoBtn:document.getElementById("langKoBtn"),
        navSearchBtn:document.getElementById("navSearchBtn"),
        navGameBtn:document.getElementById("navGameBtn"),
        navAboutBtn:document.getElementById("navAboutBtn"),
        searchTitleText:document.getElementById("searchTitleText"),
        searchSubtitleText:document.getElementById("searchSubtitleText"),
        searchInput:document.getElementById("searchInput"),
        searchBtn:document.getElementById("searchBtn"),
        suggestionList:document.getElementById("suggestionList"),
        resultEmptyText:document.getElementById("resultEmptyText"),
        resultContent:document.getElementById("resultContent"),
        statSearchCount:document.getElementById("statSearchCount"),

        gameTitleText:document.getElementById("gameTitleText"),
        gameSubtitleText:document.getElementById("gameSubtitleText"),
        gameRulesTitle:document.getElementById("gameRulesTitle"),
        rule1:document.getElementById("rule1"),
        rule2:document.getElementById("rule2"),
        rule3:document.getElementById("rule3"),
        labelScore:document.getElementById("labelScore"),
        labelRound:document.getElementById("labelRound"),
        labelLives:document.getElementById("labelLives"),
        scoreValue:document.getElementById("gameScoreValue"),
        roundValue:document.getElementById("gameRoundValue"),
        livesValue:document.getElementById("gameLivesValue"),
        badgeScore:document.getElementById("badgeScore"),
        badgeRound:document.getElementById("badgeRound"),
        badgeLives:document.getElementById("badgeLives"),
        btnStartGame:document.getElementById("btnStartGame"),
        btnSkip:document.getElementById("btnSkip"),
        btnReveal:document.getElementById("btnReveal"),
        currentTrashLabel:document.getElementById("currentTrashLabel"),
        gameTrashItem:document.getElementById("gameTrashItem"),
        gameFeedback:document.getElementById("gameFeedback"),
        binRecycle:document.getElementById("binRecycle"),
        binKitchen:document.getElementById("binKitchen"),
        binHazard:document.getElementById("binHazard"),
        binOther:document.getElementById("binOther"),

        aboutTitleText:document.getElementById("aboutTitleText"),
        aboutSubtitleText:document.getElementById("aboutSubtitleText"),
        aboutP1:document.getElementById("aboutP1"),
        aboutP2:document.getElementById("aboutP2"),
        guideTitle:document.getElementById("guideTitle"),
        guide1:document.getElementById("guide1"),
        guide2:document.getElementById("guide2"),
        guide3:document.getElementById("guide3"),
        guide4:document.getElementById("guide4")
      };

      function applyLanguage(lang){
        currentLang = lang;
        const t = i18n[lang];

        els.logoTitle.textContent = t.title;
        els.logoSubtitle.textContent = t.subtitle;

        els.navSearchBtn.textContent = t.navSearch;
        els.navGameBtn.textContent = t.navGame;
        els.navAboutBtn.textContent = t.navAbout;

        els.searchTitleText.textContent = t.searchTitle;
        els.searchSubtitleText.textContent = t.searchSubtitle;
        els.searchInput.placeholder = t.searchPlaceholder;
        els.searchBtn.textContent = t.searchBtn;
        els.resultEmptyText.textContent = t.resultEmpty;
        els.statSearchCount.textContent = `${t.todayQuery}${searchCount}${lang==="zh"?" æ¬¡":"íšŒ"}`;

        els.gameTitleText.textContent = t.gameTitle;
        els.gameSubtitleText.textContent = t.gameSubtitle;
        els.gameRulesTitle.textContent = t.rulesTitle;
        els.rule1.textContent = t.rule1;
        els.rule2.textContent = t.rule2;
        els.rule3.textContent = t.rule3;
        els.labelScore.textContent = t.labelScore;
        els.labelRound.textContent = t.labelRound;
        els.labelLives.textContent = t.labelLives;
        els.currentTrashLabel.textContent = t.currentTrash;

        els.btnStartGame.textContent = t.btnStart;
        els.btnSkip.textContent = t.btnSkip;
        els.btnReveal.textContent = t.btnReveal;
        els.binRecycle.textContent = "â™»ï¸ " + t.recycle;
        els.binKitchen.textContent = "ğŸ¥• " + t.kitchen;
        els.binHazard.textContent = "â˜ ï¸ " + t.hazard;
        els.binOther.textContent = "ğŸ—‘ï¸ " + t.other;

        els.aboutTitleText.textContent = t.aboutTitle;
        els.aboutSubtitleText.textContent = t.aboutSubtitle;
        els.aboutP1.textContent = t.aboutP1;
        els.aboutP2.textContent = t.aboutP2;
        els.guideTitle.textContent = t.guideTitle;
        els.guide1.textContent = t.g1;
        els.guide2.textContent = t.g2;
        els.guide3.textContent = t.g3;
        els.guide4.textContent = t.g4;

        els.langZhBtn.classList.toggle("active", lang==="zh");
        els.langKoBtn.classList.toggle("active", lang==="ko");

        // å¦‚æœæ¸¸æˆè¿˜æ²¡å¼€å§‹ï¼Œç”¨å½“å‰è¯­è¨€æç¤º
        if(!state.started || state.ended){
          els.gameTrashItem.textContent = t.clickStart;
          els.gameFeedback.textContent = t.gameReady;
        }
      }

      // è¯­è¨€æŒ‰é’®
      els.langZhBtn.addEventListener("click", () => applyLanguage("zh"));
      els.langKoBtn.addEventListener("click", () => applyLanguage("ko"));

      // tab åˆ‡æ¢
      document.querySelectorAll(".tab-btn").forEach(btn=>{
        btn.addEventListener("click", () => {
          document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));
          btn.classList.add("active");
          const target = btn.getAttribute("data-target");
          document.querySelectorAll("main section").forEach(sec=>sec.classList.add("hidden"));
          document.getElementById(target).classList.remove("hidden");
        });
      });

      // æœç´¢ & è‡ªåŠ¨è¡¥å…¨
      els.searchInput.addEventListener("input", () => {
        const text = els.searchInput.value.trim();
        if(!text){
          els.suggestionList.classList.add("hidden");
          return;
        }
        const list = trashList.filter(name => name.includes(text));
        els.suggestionList.innerHTML = "";
        list.forEach(name=>{
          const li = document.createElement("li");
          li.textContent = name;
          li.addEventListener("click", () => {
            els.searchInput.value = name;
            els.suggestionList.classList.add("hidden");
          });
          els.suggestionList.appendChild(li);
        });
        els.suggestionList.classList.toggle("hidden", list.length===0);
      });

      function showResultNotFound(){
        els.resultEmptyText.classList.remove("hidden");
        els.resultContent.innerHTML = "<p>æœªæ‰¾åˆ°è¯¥åƒåœ¾ï¼Œè¯·æ£€æŸ¥åç§°æˆ–è¡¥å……æ•°æ®åº“ã€‚</p>";
      }

      function showResult(name, categoryKey){
        const t = i18n[currentLang];
        const label = {
          recycle:t.recycle,
          kitchen:t.kitchen,
          hazard:t.hazard,
          other:t.other
        }[categoryKey];
        els.resultEmptyText.classList.add("hidden");
        els.resultContent.innerHTML =
          `<div class="result-title">${name}</div>
           <div class="result-meta">${label}</div>`;
      }

      els.searchBtn.addEventListener("click", () => {
        const t = i18n[currentLang];
        const text = els.searchInput.value.trim();
        if(!text) return;
        searchCount++;
        els.statSearchCount.textContent = `${t.todayQuery}${searchCount}${currentLang==="zh"?" æ¬¡":"íšŒ"}`;
        if(!trashDB[text]){
          showResultNotFound();
        }else{
          showResult(text, trashDB[text]);
        }
      });

      // æ¸¸æˆé€»è¾‘
      function updateStatusBadges(){
        els.scoreValue.textContent = state.score;
        els.roundValue.textContent = state.round;
        els.livesValue.textContent = state.lives;

        [els.badgeScore, els.badgeRound, els.badgeLives].forEach(el=>{
          el.classList.remove("badge-pulse");
          void el.offsetWidth;
          el.classList.add("badge-pulse");
        });
      }

      function resetGame(){
        state.score = 0;
        state.round = 0;
        state.lives = 5;
        state.current = null;
        state.started = true;
        state.ended = false;
        updateStatusBadges();
      }

      function nextRound(){
        const t = i18n[currentLang];
        if(state.lives<=0 || state.round>=MAX_ROUNDS){
          state.ended = true;
          els.gameFeedback.className = "game-feedback game-end";
          els.gameFeedback.innerHTML =
            `<strong>${t.finishedTitle}</strong><br>${t.finishedSummary(state.score,MAX_ROUNDS)}<br>${t.finishedTip}`;
          els.gameTrashItem.textContent = "";
          return;
        }
        state.round++;
        updateStatusBadges();
        state.current = trashList[Math.floor(Math.random()*trashList.length)];
        els.gameTrashItem.textContent = state.current;
        els.gameFeedback.className = "game-feedback";
        els.gameFeedback.textContent = t.chooseCategory;
      }

      function startGame(){
        const t = i18n[currentLang];
        resetGame();
        els.gameFeedback.textContent = t.gameReady;
        nextRound();
      }

      function checkAnswer(category){
        if(!state.started || state.ended || !state.current) return;
        const t = i18n[currentLang];
        if(trashDB[state.current] === category){
          state.score++;
          els.gameFeedback.className = "game-feedback feedback-correct";
          els.gameFeedback.textContent = t.correct;
        }else{
          state.lives--;
          els.gameFeedback.className = "game-feedback feedback-wrong";
          els.gameFeedback.textContent = t.wrong;
        }
        updateStatusBadges();
        setTimeout(nextRound, 600);
      }

      els.btnStartGame.addEventListener("click", startGame);
      els.btnSkip.addEventListener("click", ()=>{ if(state.started && !state.ended) nextRound(); });
      els.btnReveal.addEventListener("click", () => {
        if(!state.current) return;
        const t = i18n[currentLang];
        const catKey = trashDB[state.current];
        const label = {
          recycle:t.recycle,
          kitchen:t.kitchen,
          hazard:t.hazard,
          other:t.other
        }[catKey];
        els.gameFeedback.className = "game-feedback";
        els.gameFeedback.textContent = `${state.current} â†’ ${label}`;
      });

      [els.binRecycle,els.binKitchen,els.binHazard,els.binOther].forEach(btn=>{
        btn.addEventListener("click", () => {
          checkAnswer(btn.getAttribute("data-category"));
        });
      });

      // åˆå§‹åŒ–
      applyLanguage("zh");
      updateStatusBadges();
    });
  </script>
</body>
</html>


